<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Contact Us | Jella Kesava Krishna Pavan</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <div class="navbar">
    <h1>JK Krishna Pavan</h1>
    <div class="menu-icon" id="menu-btn">☰</div>
    <ul class="nav-links" id="nav-menu">
      <li><a href="index.html#home">Home</a></li>
      <li><a href="index.html#about">About</a></li>
      <li><a href="index.html#skills">Skills</a></li>
      <li><a href="projects.html">Projects</a></li>
      <li><a class="active" href="contact.html">Contact</a></li>
    </ul>
  </div>
</header>

<main>
  <section class="contact-section">
    <div class="container">
      <h2 class="section-title reveal">Contact Us</h2>
      <p class="contact-desc reveal">Have a question or want to work together? Leave a message below!</p>
      
      <div class="contact-container reveal">
        <form id="contact-form" class="contact-form">
          <div class="input-group">
            <input type="text" id="name" placeholder="Your Name" required>
          </div>
          <div class="input-group">
            <input type="email" id="email" placeholder="Your Email" required>
          </div>
          <div class="input-group">
            <textarea id="message" rows="5" placeholder="Your Message" required></textarea>
          </div>
          <button type="submit" class="btn fill" style="width: 100%;">Send Message</button>
        </form>
      </div>
    </div>
  </section>
</main>

<footer>
  © 2025 Jella Kesava Krishna Pavan
</footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-app.js";
import { getFirestore, collection, addDoc, serverTimestamp } 
from "https://www.gstatic.com/firebasejs/10.12.3/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCFMubpD-kADaPCfpRNZltcvcUOF8FxM2Q",
  authDomain: "portfolio-k78615.firebaseapp.com",
  projectId: "portfolio-k78615",
  storageBucket: "portfolio-k78615.appspot.com",
  messagingSenderId: "964001708850",
  appId: "1:964001708850:web:fe381d8843621139aab52b"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// Handle Form Submission
document.getElementById("contact-form").onsubmit = async (e) => {
  e.preventDefault();
  const btn = e.target.querySelector("button");
  btn.innerText = "Sending...";
  
  try {
    await addDoc(collection(db, "contacts"), {
      name: document.getElementById("name").value,
      email: document.getElementById("email").value,
      message: document.getElementById("message").value,
      timestamp: serverTimestamp()
    });
    alert("Message sent successfully!");
    e.target.reset();
  } catch (error) {
    alert("Error sending message. Please try again.");
  } finally {
    btn.innerText = "Send Message";
  }
};

// Mobile Menu Logic
const menuBtn = document.getElementById('menu-btn');
const navMenu = document.getElementById('nav-menu');

menuBtn.onclick = (e) => {
  navMenu.classList.toggle('active');
  e.stopPropagation();
};

document.onclick = (e) => {
  if (!navMenu.contains(e.target) && !menuBtn.contains(e.target)) {
    navMenu.classList.remove('active');
  }
};

// Reveal Animation
const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if(entry.isIntersecting) entry.target.classList.add("show");
  });
}, { threshold: 0.1 });
document.querySelectorAll(".reveal").forEach(el => observer.observe(el));
</script>

</body>
</html>