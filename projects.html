<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Projects | Jella Kesava Krishna Pavan</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <div class="navbar">
    <h1>JK Krishna Pavan</h1>
    <div class="menu-icon" id="menu-btn">☰</div>
    <ul class="nav-links" id="nav-menu">
      <li><a href="index.html#home">Home</a></li>
      <li><a href="index.html#about">About</a></li>
      <li><a href="index.html#skills">Skills</a></li>
      <li><a class="active" href="projects.html">Projects</a></li>
      <li><a href="contact.html">Contact</a></li>
    </ul>
  </div>
</header>

<main>
  <section style="margin-top:40px">
    <h2 class="section-title reveal">My Portfolio</h2>
    <div class="projects-grid reveal" id="projects-grid">
      </div>
  </section>
</main>

<footer>
  © 2025 Jella Kesava Krishna Pavan
</footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-app.js";
import { getFirestore, collection, getDocs, query, orderBy } 
from "https://www.gstatic.com/firebasejs/10.12.3/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCFMubpD-kADaPCfpRNZltcvcUOF8FxM2Q",
  authDomain: "portfolio-k78615.firebaseapp.com",
  projectId: "portfolio-k78615",
  storageBucket: "portfolio-k78615.appspot.com",
  messagingSenderId: "964001708850",
  appId: "1:964001708850:web:fe381d8843621139aab52b"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const grid = document.getElementById("projects-grid");

async function loadProjects() {
  const q = query(collection(db, "projects"), orderBy("position", "desc"));
  const snap = await getDocs(q);
  
  snap.forEach(doc => {
    const p = doc.data();
    grid.innerHTML += `
      <div class="project-card">
        <div class="project-media">
          <img src="${p.image || 'https://via.placeholder.com/400x250'}" alt="${p.title}">
        </div>
        <div class="project-body">
          <h3>${p.title}</h3>
          <p>${p.description.substring(0, 100)}...</p>
          <div class="techs">
            ${(p.technologies || []).map(t => `<span class="tech">${t}</span>`).join("")}
          </div>
          <a href="project-detail.html?id=${doc.id}" class="btn" style="margin-top:20px; width:100%; text-align:center; display:block;">View Details</a>
        </div>
      </div>`;
  });
}

loadProjects();

// Mobile Menu Logic
const menuBtn = document.getElementById('menu-btn');
const navMenu = document.getElementById('nav-menu');

menuBtn.onclick = (e) => {
  navMenu.classList.toggle('active');
  e.stopPropagation();
};

document.onclick = (e) => {
  if (!navMenu.contains(e.target) && !menuBtn.contains(e.target)) {
    navMenu.classList.remove('active');
  }
};

// Intersection Observer for Animations
const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if(entry.isIntersecting) entry.target.classList.add("show");
  });
}, { threshold: 0.1 });
document.querySelectorAll(".reveal").forEach(el => observer.observe(el));
</script>

</body>
</html>